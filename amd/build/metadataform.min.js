define(["jquery","core/log"],function(a,b){var c;return{init:function(d){c=d,a("#id-system-mtd-selectall-write").bind("click",this.selectall_system_write),a("#id-indexer-mtd-selectall-write").bind("click",this.selectall_indexer_write),a("#id-author-mtd-selectall-write").bind("click",this.selectall_author_write),a("#id-system-mtd-selectall-read").bind("click",this.selectall_system_read),a("#id-indexer-mtd-selectall-read").bind("click",this.selectall_indexer_read),a("#id-author-mtd-selectall-read").bind("click",this.selectall_author_read),a("#id-system-mtd-selectnone-write").bind("click",this.selectnone_system_write),a("#id-indexer-mtd-selectnone-write").bind("click",this.selectnone_indexer_write),a("#id-author-mtd-selectnone-write").bind("click",this.selectnone_author_write),a("#id-system-mtd-selectnone-read").bind("click",this.selectnone_system_read),a("#id-indexer-mtd-selectnone-read").bind("click",this.selectnone_indexer_read),a("#id-author-mtd-selectnone-read").bind("click",this.selectnone_author_read),a(".mtd-check").bind("change",this.toggle_childs),a(".mtd-parent").bind("init",this.init_parent),a(".mtd-parent").trigger("init"),a(".mtd-widget").bind("rowchange",this.widget_check),b.debug("AMD Mod sharedresource metadata configuration form initialized")},selectall_system_write:function(){a("."+c+"-system-write").prop("checked",!0),a("."+c+"-system-read").prop("checked",!0),a("."+c+"-system-read").prop("disabled",!0)},selectall_system_read:function(){a("."+c+"-system-read").prop("checked",!0)},selectall_indexer_write:function(){a("."+c+"-indexer-write").prop("checked",!0),a("."+c+"-indexer-read").prop("checked",!0),a("."+c+"-indexer-read").prop("disabled",!0)},selectall_indexer_read:function(){a("."+c+"-indexer-read").prop("checked",!0)},selectall_author_write:function(){a("."+c+"-author-write").prop("checked",!0),a("."+c+"-author-read").prop("checked",!0),a("."+c+"-author-read").prop("disabled",!0)},selectall_author_read:function(){a("."+c+"-author-read").prop("checked",!0)},selectnone_system_write:function(){a("."+c+"-system-write").prop("checked",!1),a("."+c+"-system-read").prop("disabled",!1)},selectnone_system_read:function(){a("."+c+"-system-read").prop("checked",!1)},selectnone_indexer_write:function(){a("."+c+"-indexer-write").prop("checked",!1),a("."+c+"-indexer-read").prop("disabled",!1)},selectnone_indexer_read:function(){a("."+c+"-indexer-read").prop("checked",!1)},selectnone_author_write:function(){a("."+c+"-author-write").prop("checked",!1),a("."+c+"-author-read").prop("disabled",!1)},selectnone_author_read:function(){a("."+c+"-author-read").prop("checked",!1)},init_parent:function(){var b=a(this),d=/([^-]*)-([^-]*)-([^-]*)-(.*)$/,e=b.attr("id").match(d);if(e){var f=e[2],g=e[3],h=e[4],i=b.prop("checked");i===!0?a("."+c+"-"+f+"-"+g+" "+h).prop("disabled",!1):(a("."+c+"-"+f+"-"+g+" "+h).prop("checked",!1),a("."+c+"-"+f+"-"+g+" "+h).prop("disabled",!0)),a("."+c+"-widget-"+h).trigger("rowchange")}},toggle_childs:function(){b.debug("AMD Mod sharedresource metadata TOGGLE CHILD");var d=a(this),e=/([^-]*)-([^-]*)-([^-]*)-(.*)$/,f=d.attr("id").match(e);if(f){var g=f[2],h=f[3],i=f[4],j=[],k=i;if(k=k.replace(/_[^_]+$/,""),k!=i){var l=0;do j.push(k),k=k.replace(/_[^_]+$/,""),l++;while(!k.match(/^\d+$/)&&l<100)}var m=d.prop("checked");if(m===!0){a("."+c+"-"+g+"-"+h+"-"+i).prop("checked",!0),a("."+c+"-"+g+"-"+h+"-"+i).prop("disabled",!1),"write"===h&&(a("#"+c+"-"+g+"-read-"+i).prop("checked",!0),a("#"+c+"-"+g+"-read-"+i).prop("disabled",!0),a("."+c+"-"+g+"-read-"+i).prop("checked",!0),a("."+c+"-"+g+"-read-"+i).prop("disabled",!0));for(var n=j.shift();n;)a("#"+c+"-"+g+"-"+h+"-"+n).prop("checked",!0),a("#"+c+"-"+g+"-"+h+"-"+n).prop("disabled",!1),"write"===h&&(a("#"+c+"-"+g+"-read-"+n).prop("checked",!0),a("#"+c+"-"+g+"-read-"+n).prop("disabled",!0)),n=j.shift(),b.debug("AMD Mod sharedresource metadata Checking parent")}else a("."+c+"-"+g+"-"+h+"-"+i).prop("checked",!1),a("."+c+"-"+g+"-"+h+"-"+i).prop("disabled",!0),"write"===h&&(a("#"+c+"-"+g+"-read-"+i).prop("disabled",!1),a("."+c+"-"+g+"-read-"+i).prop("disabled",!1));a("#"+c+"-widget-"+i).trigger("rowchange")}},widget_check:function(){b.debug("AMD Mod sharedresource metadata WIDGET CHECK");var d=a(this),e=/([^-]*)-([^-]*)-(.*)$/,f=d.attr("id").match(e);if(f){var g=f[3];if(a("#"+c+"-widget-"+g).length){var h=a("#"+c+"-system-read-"+g).prop("checked"),i=a("#"+c+"-indexer-read-"+g).prop("checked"),j=a("#"+c+"-author-read-"+g).prop("checked");j||i||h?a("#"+c+"-widget-"+g).prop("disabled",!1):(a("#"+c+"-widget-"+g).prop("checked",!1),a("#"+c+"-widget-"+g).prop("disabled",!0))}}}}});