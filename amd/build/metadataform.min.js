<<<<<<< HEAD
define ("mod_sharedresource/metadataform",["jquery","core/log"],function(a,b){var c;return{init:function init(d){c=d;a("#id-system-mtd-selectall-write").bind("click",this.selectall_system_write);a("#id-indexer-mtd-selectall-write").bind("click",this.selectall_indexer_write);a("#id-author-mtd-selectall-write").bind("click",this.selectall_author_write);a("#id-system-mtd-selectall-read").bind("click",this.selectall_system_read);a("#id-indexer-mtd-selectall-read").bind("click",this.selectall_indexer_read);a("#id-author-mtd-selectall-read").bind("click",this.selectall_author_read);a("#id-mandatory-mtd-selectall").bind("click",this.selectall_mandatory);a("#id-system-mtd-selectnone-write").bind("click",this.selectnone_system_write);a("#id-indexer-mtd-selectnone-write").bind("click",this.selectnone_indexer_write);a("#id-author-mtd-selectnone-write").bind("click",this.selectnone_author_write);a("#id-system-mtd-selectnone-read").bind("click",this.selectnone_system_read);a("#id-indexer-mtd-selectnone-read").bind("click",this.selectnone_indexer_read);a("#id-author-mtd-selectnone-read").bind("click",this.selectnone_author_read);a("#id-mandatory-mtd-selectnone").bind("click",this.selectnone_mandatory);a(".mtd-check").bind("change",this.toggle_childs);a(".mtd-parent").bind("init",this.init_parent);a(".mtd-parent").trigger("init");a(".mtd-widget").bind("rowchange",this.widget_check);b.debug("AMD Mod sharedresource metadata configuration form initialized")},selectall_system_write:function selectall_system_write(){a("."+c+"-system-write").prop("checked",!0);a("."+c+"-system-read").prop("checked",!0);a("."+c+"-system-read").prop("disabled",!0)},selectall_system_read:function selectall_system_read(){a("."+c+"-system-read").prop("checked",!0)},selectall_indexer_write:function selectall_indexer_write(){a("."+c+"-indexer-write").prop("checked",!0);a("."+c+"-indexer-read").prop("checked",!0);a("."+c+"-indexer-read").prop("disabled",!0)},selectall_indexer_read:function selectall_indexer_read(){a("."+c+"-indexer-read").prop("checked",!0)},selectall_author_write:function selectall_author_write(){a("."+c+"-author-write").prop("checked",!0);a("."+c+"-author-read").prop("checked",!0);a("."+c+"-author-read").prop("disabled",!0)},selectall_author_read:function selectall_author_read(){a("."+c+"-author-read").prop("checked",!0)},selectall_mandatory:function selectall_mandatory(){a("."+c+"-mandatory").prop("checked",!0)},selectnone_system_write:function selectnone_system_write(){a("."+c+"-system-write").prop("checked",!1);a("."+c+"-system-read").prop("disabled",!1)},selectnone_system_read:function selectnone_system_read(){a("."+c+"-system-read").prop("checked",!1)},selectnone_indexer_write:function selectnone_indexer_write(){a("."+c+"-indexer-write").prop("checked",!1);a("."+c+"-indexer-read").prop("disabled",!1)},selectnone_indexer_read:function selectnone_indexer_read(){a("."+c+"-indexer-read").prop("checked",!1)},selectnone_author_write:function selectnone_author_write(){a("."+c+"-author-write").prop("checked",!1);a("."+c+"-author-read").prop("disabled",!1)},selectnone_author_read:function selectnone_author_read(){a("."+c+"-author-read").prop("checked",!1)},selectnone_mandatory:function selectnone_mandatory(){a("."+c+"-mandatory").prop("checked",!1)},init_parent:function init_parent(){var b=a(this),d=b.attr("id").match(/([^-]*)-([^-]*)-([^-]*)-(.*)$/);if(d){var e=d[2],f=d[3],g=d[4],h=b.prop("checked");if(!0===h){a("."+c+"-"+e+"-"+f+" "+g).prop("disabled",!1)}else{a("."+c+"-"+e+"-"+f+" "+g).prop("checked",!1);a("."+c+"-"+e+"-"+f+" "+g).prop("disabled",!0)}a("."+c+"-widget-"+g).trigger("rowchange")}},toggle_childs:function toggle_childs(){b.debug("AMD Mod sharedresource metadata TOGGLE CHILD");var d=a(this),e=d.attr("id").match(/([^-]*)-([^-]*)-([^-]*)-(.*)$/);if(e){var f=e[2],g=e[3],h=e[4],j=[],k=h;k=k.replace(/_[^_]+$/,"");if(k!=h){var l=0;do{j.push(k);k=k.replace(/_[^_]+$/,"");l++}while(!k.match(/^\d+$/)&&100>l)}var m=d.prop("checked");if(!0===m){a("."+c+"-"+f+"-"+g+"-"+h).prop("checked",!0);a("."+c+"-"+f+"-"+g+"-"+h).prop("disabled",!1);if("write"===g){a("#"+c+"-"+f+"-read-"+h).prop("checked",!0);a("#"+c+"-"+f+"-read-"+h).prop("disabled",!0);a("."+c+"-"+f+"-read-"+h).prop("checked",!0);a("."+c+"-"+f+"-read-"+h).prop("disabled",!0)}var n=j.shift();while(n){a("#"+c+"-"+f+"-"+g+"-"+n).prop("checked",!0);a("#"+c+"-"+f+"-"+g+"-"+n).prop("disabled",!1);if("write"===g){a("#"+c+"-"+f+"-read-"+n).prop("checked",!0);a("#"+c+"-"+f+"-read-"+n).prop("disabled",!0)}n=j.shift();b.debug("AMD Mod sharedresource metadata Checking parent")}}else{a("."+c+"-"+f+"-"+g+"-"+h).prop("checked",!1);a("."+c+"-"+f+"-"+g+"-"+h).prop("disabled",!0);if("write"===g){a("#"+c+"-"+f+"-read-"+h).prop("disabled",!1);a("."+c+"-"+f+"-read-"+h).prop("disabled",!1)}}a("#"+c+"-widget-"+h).trigger("rowchange")}},widget_check:function widget_check(){b.debug("AMD Mod sharedresource metadata WIDGET CHECK");var d=a(this),e=d.attr("id").match(/([^-]*)-([^-]*)-(.*)$/);if(e){var f=e[3];if(a("#"+c+"-widget-"+f).length){var g=a("#"+c+"-system-read-"+f).prop("checked"),h=a("#"+c+"-indexer-read-"+f).prop("checked"),i=a("#"+c+"-author-read-"+f).prop("checked");if(i||h||g){a("#"+c+"-widget-"+f).prop("disabled",!1)}else{a("#"+c+"-widget-"+f).prop("checked",!1);a("#"+c+"-widget-"+f).prop("disabled",!0)}}}}}});
//# sourceMappingURL=metadataform.min.js.map
=======
/**
 * AMD module for configuring metadata
 * @module     mod_sharedresource/view
 * @package    blocks
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_sharedresource/metadataform",["jquery","core/log"],(function($,log){var namespace;return{init:function(args){namespace=args,$("#id-system-mtd-selectall-write").bind("click",this.selectall_system_write),$("#id-indexer-mtd-selectall-write").bind("click",this.selectall_indexer_write),$("#id-author-mtd-selectall-write").bind("click",this.selectall_author_write),$("#id-system-mtd-selectall-read").bind("click",this.selectall_system_read),$("#id-indexer-mtd-selectall-read").bind("click",this.selectall_indexer_read),$("#id-author-mtd-selectall-read").bind("click",this.selectall_author_read),$("#id-mandatory-mtd-selectall").bind("click",this.selectall_mandatory),$("#id-system-mtd-selectnone-write").bind("click",this.selectnone_system_write),$("#id-indexer-mtd-selectnone-write").bind("click",this.selectnone_indexer_write),$("#id-author-mtd-selectnone-write").bind("click",this.selectnone_author_write),$("#id-system-mtd-selectnone-read").bind("click",this.selectnone_system_read),$("#id-indexer-mtd-selectnone-read").bind("click",this.selectnone_indexer_read),$("#id-author-mtd-selectnone-read").bind("click",this.selectnone_author_read),$("#id-mandatory-mtd-selectnone").bind("click",this.selectnone_mandatory),$(".mtd-check").bind("change",this.toggle_childs),$(".mtd-parent").bind("init",this.init_parent),$(".mtd-parent").trigger("init"),$(".mtd-widget").bind("rowchange",this.widget_check),log.debug("AMD Mod sharedresource metadata configuration form initialized")},selectall_system_write:function(){$("."+namespace+"-system-write").prop("checked",!0),$("."+namespace+"-system-read").prop("checked",!0),$("."+namespace+"-system-read").prop("disabled",!0)},selectall_system_read:function(){$("."+namespace+"-system-read").prop("checked",!0)},selectall_indexer_write:function(){$("."+namespace+"-indexer-write").prop("checked",!0),$("."+namespace+"-indexer-read").prop("checked",!0),$("."+namespace+"-indexer-read").prop("disabled",!0)},selectall_indexer_read:function(){$("."+namespace+"-indexer-read").prop("checked",!0)},selectall_author_write:function(){$("."+namespace+"-author-write").prop("checked",!0),$("."+namespace+"-author-read").prop("checked",!0),$("."+namespace+"-author-read").prop("disabled",!0)},selectall_author_read:function(){$("."+namespace+"-author-read").prop("checked",!0)},selectall_mandatory:function(){$("."+namespace+"-mandatory").prop("checked",!0)},selectnone_system_write:function(){$("."+namespace+"-system-write").prop("checked",!1),$("."+namespace+"-system-read").prop("disabled",!1)},selectnone_system_read:function(){$("."+namespace+"-system-read").prop("checked",!1)},selectnone_indexer_write:function(){$("."+namespace+"-indexer-write").prop("checked",!1),$("."+namespace+"-indexer-read").prop("disabled",!1)},selectnone_indexer_read:function(){$("."+namespace+"-indexer-read").prop("checked",!1)},selectnone_author_write:function(){$("."+namespace+"-author-write").prop("checked",!1),$("."+namespace+"-author-read").prop("disabled",!1)},selectnone_author_read:function(){$("."+namespace+"-author-read").prop("checked",!1)},selectnone_mandatory:function(){$("."+namespace+"-mandatory").prop("checked",!1)},init_parent:function(){var that=$(this),matches=that.attr("id").match(/([^-]*)-([^-]*)-([^-]*)-(.*)$/);if(matches){var fieldtype=matches[2],readwrite=matches[3],nodeid=matches[4];!0===that.prop("checked")?$("."+namespace+"-"+fieldtype+"-"+readwrite+" "+nodeid).prop("disabled",!1):($("."+namespace+"-"+fieldtype+"-"+readwrite+" "+nodeid).prop("checked",!1),$("."+namespace+"-"+fieldtype+"-"+readwrite+" "+nodeid).prop("disabled",!0)),$("."+namespace+"-widget-"+nodeid).trigger("rowchange")}},toggle_childs:function(){log.debug("AMD Mod sharedresource metadata TOGGLE CHILD");var that=$(this),matches=that.attr("id").match(/([^-]*)-([^-]*)-([^-]*)-(.*)$/);if(matches){var fieldtype=matches[2],readwrite=matches[3],nodeid=matches[4],nodeparents=[],nodeidbuf=nodeid;if((nodeidbuf=nodeidbuf.replace(/_[^_]+$/,""))!=nodeid){var i=0;do{nodeparents.push(nodeidbuf),nodeidbuf=nodeidbuf.replace(/_[^_]+$/,""),i++}while(!nodeidbuf.match(/^\d+$/)&&i<100)}if(!0===that.prop("checked")){$("."+namespace+"-"+fieldtype+"-"+readwrite+"-"+nodeid).prop("checked",!0),$("."+namespace+"-"+fieldtype+"-"+readwrite+"-"+nodeid).prop("disabled",!1),"write"===readwrite&&($("#"+namespace+"-"+fieldtype+"-read-"+nodeid).prop("checked",!0),$("#"+namespace+"-"+fieldtype+"-read-"+nodeid).prop("disabled",!0),$("."+namespace+"-"+fieldtype+"-read-"+nodeid).prop("checked",!0),$("."+namespace+"-"+fieldtype+"-read-"+nodeid).prop("disabled",!0));for(var parentid=nodeparents.shift();parentid;)$("#"+namespace+"-"+fieldtype+"-"+readwrite+"-"+parentid).prop("checked",!0),$("#"+namespace+"-"+fieldtype+"-"+readwrite+"-"+parentid).prop("disabled",!1),"write"===readwrite&&($("#"+namespace+"-"+fieldtype+"-read-"+parentid).prop("checked",!0),$("#"+namespace+"-"+fieldtype+"-read-"+parentid).prop("disabled",!0)),parentid=nodeparents.shift(),log.debug("AMD Mod sharedresource metadata Checking parent")}else $("."+namespace+"-"+fieldtype+"-"+readwrite+"-"+nodeid).prop("checked",!1),$("."+namespace+"-"+fieldtype+"-"+readwrite+"-"+nodeid).prop("disabled",!0),"write"===readwrite&&($("#"+namespace+"-"+fieldtype+"-read-"+nodeid).prop("disabled",!1),$("."+namespace+"-"+fieldtype+"-read-"+nodeid).prop("disabled",!1));$("#"+namespace+"-widget-"+nodeid).trigger("rowchange")}},widget_check:function(){log.debug("AMD Mod sharedresource metadata WIDGET CHECK");var matches=$(this).attr("id").match(/([^-]*)-([^-]*)-(.*)$/);if(matches){var nodeid=matches[3];if($("#"+namespace+"-widget-"+nodeid).length){var schecked=$("#"+namespace+"-system-read-"+nodeid).prop("checked"),ichecked=$("#"+namespace+"-indexer-read-"+nodeid).prop("checked");$("#"+namespace+"-author-read-"+nodeid).prop("checked")||ichecked||schecked?$("#"+namespace+"-widget-"+nodeid).prop("disabled",!1):($("#"+namespace+"-widget-"+nodeid).prop("checked",!1),$("#"+namespace+"-widget-"+nodeid).prop("disabled",!0))}}}}}));

//# sourceMappingURL=metadataform.min.js.map
>>>>>>> MOODLE_401_STABLE
