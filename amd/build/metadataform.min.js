/**
 * AMD module for configuring metadata
 * @module     mod_sharedresource/view
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_sharedresource/metadataform",["jquery","core/log"],(function($,log){var namespace;return{init:function(args){namespace=args,$("#id-system-mtd-selectall-write").bind("click",this.selectall_system_write),$("#id-indexer-mtd-selectall-write").bind("click",this.selectall_indexer_write),$("#id-author-mtd-selectall-write").bind("click",this.selectall_author_write),$("#id-system-mtd-selectall-read").bind("click",this.selectall_system_read),$("#id-indexer-mtd-selectall-read").bind("click",this.selectall_indexer_read),$("#id-author-mtd-selectall-read").bind("click",this.selectall_author_read),$("#id-mandatory-mtd-selectall").bind("click",this.selectall_mandatory),$("#id-system-mtd-selectnone-write").bind("click",this.selectnone_system_write),$("#id-indexer-mtd-selectnone-write").bind("click",this.selectnone_indexer_write),$("#id-author-mtd-selectnone-write").bind("click",this.selectnone_author_write),$("#id-system-mtd-selectnone-read").bind("click",this.selectnone_system_read),$("#id-indexer-mtd-selectnone-read").bind("click",this.selectnone_indexer_read),$("#id-author-mtd-selectnone-read").bind("click",this.selectnone_author_read),$("#id-mandatory-mtd-selectnone").bind("click",this.selectnone_mandatory),$(".mtd-check").bind("change",this.toggle_childs),$(".mtd-parent").bind("init",this.init_parent),$(".mtd-parent").trigger("init"),$(".mtd-widget").bind("rowchange",this.widget_check),log.debug("AMD Mod sharedresource metadata configuration form initialized")},selectall_system_write:function(){$("."+namespace+"-system-write").prop("checked",!0),$("."+namespace+"-system-read").prop("checked",!0),$("."+namespace+"-system-read").prop("disabled",!0)},selectall_system_read:function(){$("."+namespace+"-system-read").prop("checked",!0)},selectall_indexer_write:function(){$("."+namespace+"-indexer-write").prop("checked",!0),$("."+namespace+"-indexer-read").prop("checked",!0),$("."+namespace+"-indexer-read").prop("disabled",!0)},selectall_indexer_read:function(){$("."+namespace+"-indexer-read").prop("checked",!0)},selectall_author_write:function(){$("."+namespace+"-author-write").prop("checked",!0),$("."+namespace+"-author-read").prop("checked",!0),$("."+namespace+"-author-read").prop("disabled",!0)},selectall_author_read:function(){$("."+namespace+"-author-read").prop("checked",!0)},selectall_mandatory:function(){$("."+namespace+"-mandatory").prop("checked",!0)},selectnone_system_write:function(){$("."+namespace+"-system-write").prop("checked",!1),$("."+namespace+"-system-read").prop("disabled",!1)},selectnone_system_read:function(){$("."+namespace+"-system-read").prop("checked",!1)},selectnone_indexer_write:function(){$("."+namespace+"-indexer-write").prop("checked",!1),$("."+namespace+"-indexer-read").prop("disabled",!1)},selectnone_indexer_read:function(){$("."+namespace+"-indexer-read").prop("checked",!1)},selectnone_author_write:function(){$("."+namespace+"-author-write").prop("checked",!1),$("."+namespace+"-author-read").prop("disabled",!1)},selectnone_author_read:function(){$("."+namespace+"-author-read").prop("checked",!1)},selectnone_mandatory:function(){$("."+namespace+"-mandatory").prop("checked",!1)},init_parent:function(){var that=$(this),matches=that.attr("id").match(/([^-]*)-([^-]*)-([^-]*)-(.*)$/);if(matches){var fieldtype=matches[2],readwrite=matches[3],nodeid=matches[4];!0===that.prop("checked")?$("."+namespace+"-"+fieldtype+"-"+readwrite+" "+nodeid).prop("disabled",!1):($("."+namespace+"-"+fieldtype+"-"+readwrite+" "+nodeid).prop("checked",!1),$("."+namespace+"-"+fieldtype+"-"+readwrite+" "+nodeid).prop("disabled",!0)),$("."+namespace+"-widget-"+nodeid).trigger("rowchange")}},toggle_childs:function(){log.debug("AMD Mod sharedresource metadata TOGGLE CHILD");var that=$(this),matches=that.attr("id").match(/([^-]*)-([^-]*)-([^-]*)-(.*)$/);if(matches){var fieldtype=matches[2],readwrite=matches[3],nodeid=matches[4],nodeparents=[],nodeidbuf=nodeid;if((nodeidbuf=nodeidbuf.replace(/_[^_]+$/,""))!=nodeid){var i=0;do{nodeparents.push(nodeidbuf),nodeidbuf=nodeidbuf.replace(/_[^_]+$/,""),i++}while(!nodeidbuf.match(/^\d+$/)&&i<100)}if(!0===that.prop("checked")){$("."+namespace+"-"+fieldtype+"-"+readwrite+"-"+nodeid).prop("checked",!0),$("."+namespace+"-"+fieldtype+"-"+readwrite+"-"+nodeid).prop("disabled",!1),"write"===readwrite&&($("#"+namespace+"-"+fieldtype+"-read-"+nodeid).prop("checked",!0),$("#"+namespace+"-"+fieldtype+"-read-"+nodeid).prop("disabled",!0),$("."+namespace+"-"+fieldtype+"-read-"+nodeid).prop("checked",!0),$("."+namespace+"-"+fieldtype+"-read-"+nodeid).prop("disabled",!0));for(var parentid=nodeparents.shift();parentid;)$("#"+namespace+"-"+fieldtype+"-"+readwrite+"-"+parentid).prop("checked",!0),$("#"+namespace+"-"+fieldtype+"-"+readwrite+"-"+parentid).prop("disabled",!1),"write"===readwrite&&($("#"+namespace+"-"+fieldtype+"-read-"+parentid).prop("checked",!0),$("#"+namespace+"-"+fieldtype+"-read-"+parentid).prop("disabled",!0)),parentid=nodeparents.shift(),log.debug("AMD Mod sharedresource metadata Checking parent")}else $("."+namespace+"-"+fieldtype+"-"+readwrite+"-"+nodeid).prop("checked",!1),$("."+namespace+"-"+fieldtype+"-"+readwrite+"-"+nodeid).prop("disabled",!0),"write"===readwrite&&($("#"+namespace+"-"+fieldtype+"-read-"+nodeid).prop("disabled",!1),$("."+namespace+"-"+fieldtype+"-read-"+nodeid).prop("disabled",!1));$("#"+namespace+"-widget-"+nodeid).trigger("rowchange")}},widget_check:function(){log.debug("AMD Mod sharedresource metadata WIDGET CHECK");var matches=$(this).attr("id").match(/([^-]*)-([^-]*)-(.*)$/);if(matches){var nodeid=matches[3];if($("#"+namespace+"-widget-"+nodeid).length){var schecked=$("#"+namespace+"-system-read-"+nodeid).prop("checked"),ichecked=$("#"+namespace+"-indexer-read-"+nodeid).prop("checked");$("#"+namespace+"-author-read-"+nodeid).prop("checked")||ichecked||schecked?$("#"+namespace+"-widget-"+nodeid).prop("disabled",!1):($("#"+namespace+"-widget-"+nodeid).prop("checked",!1),$("#"+namespace+"-widget-"+nodeid).prop("disabled",!0))}}}}}));

//# sourceMappingURL=metadataform.min.js.map