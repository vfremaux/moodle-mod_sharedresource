define(["jquery","core/log","core/config"],function(a,b,c){var d={component:"mod_sharedresource",shortcomponent:"mod_sharedresource",componentpath:"/mod/sharedresource",init:function(){var c="#id_s_"+d.component+"_licensekey";a(c).bind("change",this.check_product_key),a(c).trigger("change"),b.debug("AMD Pro js initialized for "+d.component+" system")},check_product_key:function(){var b,e="#id_s_"+d.component+"_licensekey",f=a(this),g=f.val().replace(/-/g,""),h=g.substr(0,14),i=g.substr(14,2),j=d.checksum(h),k=' <img src="'+c.wwwroot+'/pix/i/valid.png">',l=' <img src="'+c.wwwroot+'/pix/i/warning.png">',m=' <img src="'+c.wwwroot+'/pix/i/invalid.png">',n=' <img src="'+c.wwwroot+'/pix/i/ajaxloader.gif">';if(i===j){var o=c.wwwroot+"/"+d.componentpath+"/pro/ajax/services.php?";o+="what=license",o+="&service=check",o+="&customerkey="+f.val(),o+="&provider="+a("#id_s_"+d.component+"_licenseprovider").val(),a(e+" + img").remove(),a(e).after(n),a.get(o,function(c){c.match(/SET OK/)?(b=c.match(/-\d+.*$/))?(a(e+" + img").remove(),a(e).after(l)):(a(e+" + img").remove(),a(e).after(k)):(a(e+" + img").remove(),a(e).after(m))},"html")}else a(e+" + img").remove(),a(e).after(l)},checksum:function(a){var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=b.split(""),d=c.length,e=a.split(""),f=0;for(var g in e){var h=e[g].charCodeAt(0);f+=h}var i=Math.floor(f/d)%d,j=f%d;return""+c[j]+c[i]}};return d});