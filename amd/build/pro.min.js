<<<<<<< HEAD
define ("mod_sharedresource/pro",["jquery","core/log","core/config"],function(a,b,c){var d={component:"mod_sharedresource",shortcomponent:"mod_sharedresource",componentpath:"/mod/sharedresource",init:function init(){var c="#id_s_"+d.component+"_licensekey";a(c).bind("change",this.check_product_key);a(c).trigger("change");b.debug("AMD Pro js initialized for "+d.component+" system")},check_product_key:function check_product_key(){var b="#id_s_"+d.component+"_licensekey",e=a(this),f=e.val().replace(/-/g,""),g=f.substr(0,14),h=f.substr(14,2),i=d.checksum(g),j=" <img src=\""+c.wwwroot+"/pix/i/valid.png\">",k=" <img src=\""+c.wwwroot+"/pix/i/warning.png\">",l=" <img src=\""+c.wwwroot+"/pix/i/invalid.png\">",m=" <img src=\""+c.wwwroot+"/pix/i/ajaxloader.gif\">",n;if(h===i){var o=c.wwwroot+"/"+d.componentpath+"/pro/ajax/services.php?";o+="what=license";o+="&service=check";o+="&customerkey="+e.val();o+="&provider="+a("#id_s_"+d.component+"_licenseprovider").val();a(b+" + img").remove();a(b).after(m);a.get(o,function(c){if(c.match(/SET OK/)){if(n=c.match(/-\d+.*$/)){a(b+" + img").remove();a(b).after(k)}else{a(b+" + img").remove();a(b).after(j)}}else{a(b+" + img").remove();a(b).after(l)}},"html")}else{a(b+" + img").remove();a(b).after(k)}},checksum:function checksum(a){var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),c=b.length,d=a.split(""),e=0;for(var f in d){var g=d[f].charCodeAt(0);e+=g}var h=Math.floor(e/c)%c,i=e%c;return""+b[i]+b[h]}};return d});
//# sourceMappingURL=pro.min.js.map
=======
define("mod_sharedresource/pro",["jquery","core/log","core/config"],(function($,log,cfg){var sharedresourcepro={component:"mod_sharedresource",shortcomponent:"sharedresource",componentpath:"mod/sharedresource",init:function(){var licensekeyid="#id_s_"+sharedresourcepro.shortcomponent+"_licensekey";$(licensekeyid).bind("change",this.check_product_key),$(licensekeyid).trigger("change"),log.debug("AMD Pro js initialized for "+sharedresourcepro.component+" system")},check_product_key:function(){var licensekeyid="#id_s_"+sharedresourcepro.shortcomponent+"_licensekey",that=$(this),productkey=that.val().replace(/-/g,""),payload=productkey.substr(0,14),crc=productkey.substr(14,2),calculated=sharedresourcepro.checksum(payload),validicon=' <img src="'+cfg.wwwroot+'/pix/i/valid.png">',cautionicon=' <img src="'+cfg.wwwroot+'/pix/i/warning.png">',invalidicon=' <img src="'+cfg.wwwroot+'/pix/i/invalid.png">',waiticon=' <img src="'+cfg.wwwroot+'/pix/i/ajaxloader.gif">';if(crc===calculated){var url=cfg.wwwroot+"/"+sharedresourcepro.componentpath+"/pro/ajax/services.php?";url+="what=license",url+="&service=check",url+="&customerkey="+that.val(),url+="&provider="+$("#id_s_"+sharedresourcepro.shortcomponent+"_licenseprovider").val(),$(licensekeyid+" + img").remove(),$(licensekeyid).after(waiticon),$.get(url,(function(data){data.match(/(SET|CHECK) OK/)?data.match(/-\d+.*$/)?($(licensekeyid+" + img").remove(),$(licensekeyid).after(cautionicon)):($(licensekeyid+" + img").remove(),$(licensekeyid).after(validicon)):($(licensekeyid+" + img").remove(),$(licensekeyid).after(invalidicon))}),"html")}else $(licensekeyid+" + img").remove(),$(licensekeyid).after(cautionicon)},checksum:function(keypayload){var crcrangearr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),crccount=crcrangearr.length,chars=keypayload.split(""),crc=0;for(var ch in chars){crc+=chars[ch].charCodeAt(0)}var crc2=Math.floor(crc/crccount)%crccount;return""+crcrangearr[crc%crccount]+crcrangearr[crc2]}};return sharedresourcepro}));

//# sourceMappingURL=pro.min.js.map
>>>>>>> MOODLE_401_STABLE
